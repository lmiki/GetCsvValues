<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <h1></h1>
  
  <select id="dropdownManufacturer">
  </select>
  <select id="dropdownModel">
  </select>
  
  
  <script>
    function readCSV(file, callback) {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          callback(xhr.responseText);
        }
      };
      xhr.open("GET", file, true);
      xhr.send();
    }
    
    function populateManufacturerDropdown(csvData) {
      var lines = csvData.split("\n");
      var dropdown = document.getElementById("dropdownManufacturer");
      
      for (let i = 1; i < lines.length; i++) {
                        const cells = lines[i].split(',');
                        const value = cells[0].trim();
                        if (!Array.from(dropdown.options).some(option => option.value === value.toString())) {
                          const option = document.createElement('option');
                          option.text = value;
                          dropdown.add(option);
                        }
      }
    }

    function populateModelDropdown(csvData) {
      var lines = csvData.split("\n");
      var FirstDropdown = document.getElementById("dropdownManufacturer");
      var SecondDropdown = document.getElementById("dropdownModel");
      const selectedOption = FirstDropdown.value;

      for (let i = 1; i < lines.length; i++) {
                        const cells = lines[i].split(',');
                        const Mainvalue = cells[0].trim();
                        const value = cells[1].trim();
                        if (Mainvalue === selectedOption.toString()) {
                          const option = document.createElement('option');
                          option.text = value;
                          dropdown.add(option);
                        }
      }
    }
    
    var csvFile = "./ExampleCSV_Derya.csv";
    
    readCSV(csvFile, populateManufacturerDropdown);
    var dropdownManufacturer = document.getElementById("dropdownManufacturer");
    dropdownManufacturer.addEventListener('change', readCSV(csvFile, populateModelDropdown));
  </script>
</body>
</html>
