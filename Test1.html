<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <h1></h1>
  
  <select id="dropdownManufacturer">
  </select>
  <select id="dropdownModel">
  </select>
  
  
  <script>
    
   function loadCSV(file, callback) {
    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        callback(xhr.responseText);
      } else {
          console.error('Failed to load CSV file.');
      }
     }
    };
    xhr.open('GET', file, true);
    xhr.send();
  }

  function parseCSV(csv) {
    const lines = csv.split('\n');
    const data = lines.map(line => line.split(','));
    return data;
  }

  function populateDropdown(dropdown, options) {
    dropdown.innerHTML = '';
    options.forEach(option => {
      const optionElem = document.createElement('option');
      optionElem.value = option;
      optionElem.text = option;
      dropdown.appendChild(optionElem);
    });
  }

  const dropdownManufacturer = document.getElementById("dropdownManufacturer");
  const dropdownModel = document.getElementById("dropdownModel");

  loadCSV('./ExampleCSV_Derya.csv', function(csv) {
  const data = parseCSV(csv);

  const firstColumn = data.map(row => row[1]);
  const uniqueValues = [...new Set(firstColumn)];
  populateDropdown(dropdownManufacturer, uniqueValues);

  dropdownManufacturer.addEventListener('change', function() {
    const selectedValue = dropdownManufacturer.value;
    const filteredValues = data
      .filter(row => row[0] === selectedValue)
      .map(row => row[1]);

    populateDropdown(dropdownModel, filteredValues);
  });
});

</script>
</body>
</html>
